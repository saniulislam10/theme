{%- style -%}
  .newsletter {
    padding: 3rem 1.5rem;
    text-align: center;
    background-color: {{ section.settings.background_color }};
    color: {{ section.settings.text_color }};
  }
  .newsletter__content {
    max-width: 600px;
    margin: 0 auto;
  }
  .newsletter__heading {
    margin: 0 0 1rem;
    font-size: 2rem;
  }
  .newsletter__text {
    margin: 0 0 2rem;
    font-size: 1.1rem;
  }
  .newsletter-form {
    display: flex;
    max-width: 400px;
    margin: 0 auto;
  }
  .newsletter-form__input {
    flex: 1;
    padding: 0.75rem 1rem;
    border: 1px solid #ddd;
    border-radius: 4px 0 0 4px;
    font-size: 1rem;
  }
  .newsletter-form__button {
    padding: 0.75rem 1.5rem;
    background-color: {{ section.settings.button_background_color }};
    color: {{ section.settings.button_text_color }};
    border: none;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
    transition: opacity 0.3s ease;
  }
  .newsletter-form__button:hover {
    opacity: 0.8;
  }
  @media (max-width: 480px) {
    .newsletter-form {
      flex-direction: column;
    }
    .newsletter-form__input {
      border-radius: 4px;
      margin-bottom: 0.5rem;
    }
    .newsletter-form__button {
      border-radius: 4px;
    }
  }
{%- endstyle -%}

<div class="newsletter">
  <div class="newsletter__content">
    {%- if section.settings.heading != blank -%}
      <h2 class="newsletter__heading">{{ section.settings.heading }}</h2>
    {%- endif -%}
    {%- if section.settings.text != blank -%}
      <p class="newsletter__text">{{ section.settings.text }}</p>
    {%- endif -%}
    
    {%- form 'customer', id: 'NewsletterForm' -%}
      <input type="hidden" name="contact[tags]" value="newsletter">
      <div class="newsletter-form">
        <input
          type="email"
          name="contact[email]"
          class="newsletter-form__input"
          value="{{ form.email }}"
          aria-required="true"
          autocorrect="off"
          autocapitalize="off"
          autocomplete="email"
          placeholder="{{ section.settings.placeholder }}"
          required
        >
        <button type="submit" class="newsletter-form__button" name="commit">
          {{ section.settings.button_text }}
        </button>
      </div>
      {%- if form.posted_successfully? -%}
        <p class="newsletter-form__message newsletter-form__message--success" tabindex="-1" autofocus>
          {{ 'newsletter.success' | t }}
        </p>
      {%- endif -%}
      {%- if form.errors -%}
        <div class="newsletter-form__message newsletter-form__message--error">
          {{ form.errors.translated_fields['email'] | capitalize }} {{ form.errors.messages['email'] }}
        </div>
      {%- endif -%}
    {%- endform -%}
  </div>
</div>

{% schema %}
{
  "name": "Newsletter",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Subscribe to our newsletter"
    },
    {
      "type": "text",
      "id": "text",
      "label": "Text",
      "default": "Stay updated with our latest products and offers"
    },
    {
      "type": "text",
      "id": "placeholder",
      "label": "Email placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Subscribe"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background color",
      "default": "#f4f4f4"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "button_background_color",
      "label": "Button background color",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button text color",
      "default": "#ffffff"
    }
  ],
  "presets": [
    {
      "name": "Newsletter",
      "category": "Promotional"
    }
  ]
}
{% endschema %} 